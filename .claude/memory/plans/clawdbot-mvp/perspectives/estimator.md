# 估算專家視角報告

**視角**: estimator
**聚焦**: 工作量評估、時程規劃
**模型**: haiku
**日期**: 2026-01-27

---

## 執行摘要

基於研究報告和架構設計，本報告提供 Clawdbot MVP 的工作量估算。總估算 **330-430 小時**，建議 **4 週開發週期**（單人全職）。關鍵路徑為 Claude Code 整合 → 權限系統 → Telegram 整合。

---

## 1. 工作分解結構（WBS）

### 1.1 模組估算

| 模組 | 子任務 | 樂觀 | 正常 | 悲觀 | PERT |
|------|--------|------|------|------|------|
| **專案設定** | | 8h | 12h | 20h | **13h** |
| - 專案初始化 | tsconfig, package.json, lint | 2h | 3h | 5h | 3h |
| - 目錄結構 | 建立 src/ 結構 | 1h | 2h | 3h | 2h |
| - CI/CD | GitHub Actions | 3h | 4h | 8h | 5h |
| - 開發環境 | Docker, env setup | 2h | 3h | 4h | 3h |
| **配置系統** | | 16h | 24h | 36h | **25h** |
| - Schema 定義 | Zod schemas | 4h | 6h | 10h | 6h |
| - 載入器 | YAML + env 解析 | 4h | 6h | 8h | 6h |
| - 驗證邏輯 | 跨欄位驗證 | 4h | 6h | 10h | 6h |
| - 測試 | 單元 + 整合 | 4h | 6h | 8h | 6h |
| **權限系統** | | 40h | 56h | 80h | **58h** |
| - Allowlist | 載入 + 查詢 | 4h | 6h | 10h | 6h |
| - DM Pairing | 配對流程 | 8h | 12h | 20h | 13h |
| - Permission Checker | 集中化檢查 | 12h | 16h | 24h | 17h |
| - Audit Logger | 日誌系統 | 8h | 12h | 16h | 12h |
| - 測試 | 安全測試 | 8h | 10h | 10h | 10h |
| **Claude Code 整合** | | 56h | 72h | 100h | **75h** |
| - Adapter 設計 | 介面定義 | 4h | 6h | 10h | 6h |
| - Task API 整合 | spawn + stream | 16h | 24h | 36h | 25h |
| - Tool API | HTTP 端點 | 12h | 16h | 24h | 17h |
| - Session 管理 | 上下文傳遞 | 8h | 10h | 14h | 10h |
| - 錯誤處理 | 重試 + fallback | 8h | 10h | 10h | 10h |
| - 測試 | 模擬 + 整合 | 8h | 6h | 6h | 7h |
| **Telegram 整合** | | 32h | 44h | 64h | **46h** |
| - Grammy 設定 | Bot + polling | 4h | 6h | 10h | 6h |
| - 消息處理 | handlers | 8h | 12h | 16h | 12h |
| - 權限中間件 | 整合 Permission | 6h | 8h | 12h | 8h |
| - Typing 控制 | heartbeat | 4h | 6h | 8h | 6h |
| - 回覆格式化 | Markdown | 4h | 6h | 10h | 6h |
| - 測試 | mocking | 6h | 6h | 8h | 6h |
| **存儲系統** | | 20h | 28h | 40h | **29h** |
| - Session Store | JSON 讀寫 | 6h | 8h | 12h | 8h |
| - Transcript Store | JSONL append | 4h | 6h | 8h | 6h |
| - 檔案鎖定 | 並發控制 | 4h | 6h | 12h | 7h |
| - 測試 | 並發測試 | 6h | 8h | 8h | 8h |
| **CLI 工具** | | 12h | 16h | 24h | **17h** |
| - 啟動命令 | start/stop | 4h | 6h | 8h | 6h |
| - 配置命令 | config check | 4h | 4h | 8h | 5h |
| - 狀態命令 | status | 4h | 6h | 8h | 6h |
| **文檔** | | 12h | 16h | 24h | **17h** |
| - README | 快速開始 | 2h | 4h | 6h | 4h |
| - 架構文檔 | design docs | 4h | 6h | 10h | 6h |
| - API 文檔 | TypeDoc | 4h | 4h | 6h | 4h |
| - 部署指南 | 運維文檔 | 2h | 2h | 2h | 2h |
| **整合測試** | | 16h | 24h | 36h | **25h** |
| - E2E 測試 | 完整流程 | 8h | 12h | 20h | 13h |
| - 壓力測試 | 負載測試 | 4h | 6h | 8h | 6h |
| - 安全測試 | 滲透測試 | 4h | 6h | 8h | 6h |
| **緩衝** | 意外情況 | 24h | 32h | 48h | **33h** |
| **總計** | | **236h** | **324h** | **472h** | **338h** |

### 1.2 PERT 計算

```
PERT = (樂觀 + 4×正常 + 悲觀) / 6
標準差 = (悲觀 - 樂觀) / 6

總估算: 338 小時 ± 39 小時
95% 信賴區間: 260 - 416 小時
```

---

## 2. 時程規劃

### 2.1 4 週計劃（40h/週）

```
Week 1: 基礎建設
├── 專案設定 (13h)
├── 配置系統 (25h)
└── 緩衝 (2h)
總計: 40h

Week 2: 核心功能
├── 權限系統 (40h)
總計: 40h

Week 3: 整合開發
├── Claude Code 整合 (40h)
└── 權限系統（剩餘 18h）
總計: 40h (跨週)

Week 4: 完成與測試
├── Claude Code 整合（剩餘 35h）
├── Telegram 整合 (部分)
總計: 35h

Week 5 (溢出):
├── Telegram 整合（剩餘）
├── 存儲系統 (29h)
├── CLI 工具 (17h)
├── 文檔 (17h)
├── 整合測試 (25h)
├── 緩衝 (31h)
總計: 約 120h（需額外 3 週）
```

### 2.2 修正後 7 週計劃

| 週次 | 主要工作 | 產出 | 里程碑 |
|------|---------|------|--------|
| W1 | 專案設定、配置系統 | 可配置的空殼 | M1: Skeleton |
| W2 | 權限系統 | 完整權限檢查 | M2: Security |
| W3 | Claude Code 整合 (1/2) | Adapter 框架 | - |
| W4 | Claude Code 整合 (2/2) | 可對話 | M3: Core |
| W5 | Telegram 整合 | Bot 上線 | M4: Integration |
| W6 | 存儲、CLI、文檔 | 完整功能 | M5: Feature Complete |
| W7 | 整合測試、緩衝 | 生產就緒 | M6: Release |

### 2.3 關鍵路徑

```
專案設定 → 配置系統 → 權限系統 → Claude Code 整合 → Telegram 整合 → 測試
   13h        25h         58h           75h             46h          25h
                                                                   = 242h
```

**關鍵路徑長度**: 242 小時 ≈ 6 週

---

## 3. 資源需求

### 3.1 人力配置

| 角色 | 人數 | 技能需求 |
|------|------|---------|
| 全端開發 | 1 | TypeScript, Node.js, Telegram API |
| 兼職 Code Review | 0.2 | 安全專長優先 |

### 3.2 環境需求

| 類別 | 項目 | 估計成本 |
|------|------|---------|
| 開發 | MacBook / Linux | 已有 |
| 測試 | Telegram Test Bot | 免費 |
| CI/CD | GitHub Actions | 免費 (2000 min/月) |
| 部署 | VPS (optional) | $10-20/月 |

---

## 4. 風險因素調整

### 4.1 可能增加時間的因素

| 因素 | 影響 | 機率 | 調整 |
|------|------|------|------|
| Claude Code API 不穩定 | +20h | 30% | +6h |
| 權限邏輯複雜度超預期 | +16h | 25% | +4h |
| Telegram API 限制 | +8h | 20% | +2h |
| 測試覆蓋率要求提高 | +12h | 40% | +5h |
| **總調整** | | | **+17h** |

### 4.2 可能減少時間的因素

| 因素 | 影響 | 機率 | 調整 |
|------|------|------|------|
| Grammy 比預期好用 | -8h | 40% | -3h |
| 複用 Clawdbot 代碼 | -16h | 50% | -8h |
| 簡化 Session 管理 | -8h | 30% | -2h |
| **總調整** | | | **-13h** |

### 4.3 調整後估算

```
基礎估算: 338h
風險調整: +17h - 13h = +4h
最終估算: 342h

建議規劃: 350h（含餘裕）
週數: 350h / 40h = 8.75 週 ≈ 9 週
```

---

## 5. 建議

### 5.1 時程建議

1. **MVP 範圍固定**：不在開發中增加功能
2. **權限系統優先**：安全不能妥協
3. **測試時間保留**：不壓縮測試週

### 5.2 成本優化

1. **複用 Clawdbot 代碼**：可節省 8-16 小時
2. **使用 Grammy 內建功能**：減少自訂開發
3. **延後 CLI 工具**：可放到 v1.1

### 5.3 里程碑驗收

| 里程碑 | 週次 | 驗收標準 |
|--------|------|---------|
| M1: Skeleton | W1 | 可載入配置，通過 CI |
| M2: Security | W2 | 權限測試 100% 通過 |
| M3: Core | W4 | Claude Code 可對話 |
| M4: Integration | W5 | Telegram Bot 可收發訊息 |
| M5: Feature Complete | W6 | 全功能可用 |
| M6: Release | W7 | 生產就緒 |

---

## 6. 總結

| 指標 | 值 |
|------|-----|
| **總工時** | 330-430 小時 |
| **PERT 估算** | 338 小時 |
| **建議規劃** | 350 小時 |
| **建議週數** | 7-9 週（單人全職） |
| **關鍵路徑** | 242 小時 |
| **最大風險** | Claude Code 整合 |

---

**報告生成時間**: 2026-01-27
**視角**: estimator
**信心度**: 中（首次整合 Claude Code）
