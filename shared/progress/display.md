# é€²åº¦é¡¯ç¤ºæ¨¡çµ„

> æä¾›å³æ™‚å·¥ä½œæµåŸ·è¡Œé€²åº¦å¯è¦–åŒ–

## æ¦‚è¿°

é€²åº¦é¡¯ç¤ºæ¨¡çµ„åœ¨å·¥ä½œæµåŸ·è¡ŒæœŸé–“æä¾›å³æ™‚ç‹€æ…‹æ›´æ–°ï¼Œè®“ä½¿ç”¨è€…æ¸…æ¥šäº†è§£ç•¶å‰åŸ·è¡Œé€²åº¦ã€‚

## é€²åº¦å…ƒç´ 

### 1. éšæ®µé€²åº¦æ¢

é¡¯ç¤ºæ•´é«”å·¥ä½œæµé€²åº¦ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Multi-Agent Workflow Progress                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  RESEARCH â†’ PLAN â†’ IMPLEMENT â†’ REVIEW â†’ VERIFY              â”‚
â”‚     âœ…       âœ…       ğŸ”„        â³       â³                  â”‚
â”‚                                                              â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60%                       â”‚
â”‚                                                              â”‚
â”‚  ç•¶å‰ï¼šIMPLEMENT (3/5 ä»»å‹™)                                  â”‚
â”‚  å·²è€—æ™‚ï¼š15 åˆ†é˜                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. è¦–è§’ç‹€æ…‹é¡¯ç¤º

é¡¯ç¤ºå„è¦–è§’çš„åŸ·è¡Œç‹€æ…‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase: IMPLEMENT - è¦–è§’ç›£ç£                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TDD å®ˆè­·è€…  â”‚ æ•ˆèƒ½å„ªåŒ–å¸«  â”‚ å®‰å…¨å¯©è¨ˆå“¡  â”‚ ç¶­è­·æ€§å°ˆå®¶  â”‚ â”‚
â”‚  â”‚     âœ…      â”‚     ğŸ”„      â”‚     â³      â”‚     â³      â”‚ â”‚
â”‚  â”‚   2.5 åˆ†é˜  â”‚   åŸ·è¡Œä¸­... â”‚    ç­‰å¾…ä¸­   â”‚    ç­‰å¾…ä¸­   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  å·²å®Œæˆï¼š1/4 è¦–è§’                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. éšæ®µè½‰æ›é€šçŸ¥

éšæ®µåˆ‡æ›æ™‚é¡¯ç¤ºé€šçŸ¥ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… PLAN éšæ®µå®Œæˆ                                            â”‚
â”‚                                                              â”‚
â”‚  æ‘˜è¦ï¼š                                                      â”‚
â”‚  - 4 å€‹è¦–è§’å®Œæˆ                                              â”‚
â”‚  - è€—æ™‚ï¼š8 åˆ†é˜                                              â”‚
â”‚  - ç”¢å‡ºï¼šimplementation-plan.md                              â”‚
â”‚                                                              â”‚
â”‚  â¡ï¸ é€²å…¥ IMPLEMENT éšæ®µ...                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. æ™‚é–“è¿½è¹¤

é¡¯ç¤ºå·²è€—æ™‚å’Œé ä¼°å‰©é¤˜ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ™‚é–“è¿½è¹¤                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  å·²è€—æ™‚ï¼š25 åˆ†é˜                                             â”‚
â”‚  é ä¼°å‰©é¤˜ï¼š~15 åˆ†é˜                                          â”‚
â”‚  é ä¼°ç¸½æ™‚é–“ï¼š~40 åˆ†é˜                                        â”‚
â”‚                                                              â”‚
â”‚  éšæ®µè€—æ™‚ï¼š                                                  â”‚
â”‚  - RESEARCHï¼š8 åˆ†é˜ âœ…                                       â”‚
â”‚  - PLANï¼š7 åˆ†é˜ âœ…                                           â”‚
â”‚  - IMPLEMENTï¼š10 åˆ†é˜ ğŸ”„ (é€²è¡Œä¸­)                            â”‚
â”‚  - REVIEWï¼š~5 åˆ†é˜ (é ä¼°)                                    â”‚
â”‚  - VERIFYï¼š~5 åˆ†é˜ (é ä¼°)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç‹€æ…‹åœ–ç¤º

### éšæ®µç‹€æ…‹

| åœ–ç¤º | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| â³ | pending | ç­‰å¾…åŸ·è¡Œ |
| ğŸ”„ | running | åŸ·è¡Œä¸­ |
| âœ… | completed | æˆåŠŸå®Œæˆ |
| âŒ | failed | åŸ·è¡Œå¤±æ•— |
| â­ï¸ | skipped | å·²è·³é |
| ğŸ”™ | rollback | å›é€€ä¸­ |

### è¦–è§’ç‹€æ…‹

| åœ–ç¤º | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| â³ | pending | ç­‰å¾…å•Ÿå‹• |
| ğŸ”„ | running | åŸ·è¡Œä¸­ |
| âœ… | completed | å®Œæˆï¼ˆç„¡å•é¡Œï¼‰ |
| âš ï¸ | completed_with_warnings | å®Œæˆï¼ˆæœ‰è­¦å‘Šï¼‰ |
| âŒ | failed | åŸ·è¡Œå¤±æ•— |

## é€²åº¦æ›´æ–°æ™‚æ©Ÿ

### è§¸ç™¼äº‹ä»¶

```yaml
progress_events:
  # å·¥ä½œæµç´šåˆ¥
  - workflow_start
  - workflow_end

  # éšæ®µç´šåˆ¥
  - stage_start
  - stage_progress      # éšæ®µå…§é€²åº¦æ›´æ–°
  - stage_end

  # è¦–è§’ç´šåˆ¥
  - perspective_start
  - perspective_end

  # ä»»å‹™ç´šåˆ¥ï¼ˆIMPLEMENTï¼‰
  - task_start
  - task_end

  # è¿­ä»£ç´šåˆ¥
  - iteration_start
  - iteration_end
  - rollback_triggered
```

### æ›´æ–°é »ç‡

```yaml
update_frequency:
  stage_progress: "10 seconds"    # éšæ®µé€²åº¦æ¯ 10 ç§’æ›´æ–°
  perspective_status: "on_change"  # è¦–è§’ç‹€æ…‹è®ŠåŒ–æ™‚ç«‹å³æ›´æ–°
  time_tracking: "30 seconds"      # æ™‚é–“è¿½è¹¤æ¯ 30 ç§’æ›´æ–°
```

## é€²åº¦é¡¯ç¤ºæ ¼å¼

### ç°¡æ½”æ¨¡å¼

é©ç”¨æ–¼çµ‚ç«¯å¯¬åº¦æœ‰é™çš„æƒ…æ³ï¼š

```
[IMPLEMENT] ğŸ”„ 60% | 15 åˆ†é˜ | è¦–è§’: âœ…âœ…ğŸ”„â³
```

### è©³ç´°æ¨¡å¼

é è¨­æ¨¡å¼ï¼Œé¡¯ç¤ºå®Œæ•´è³‡è¨Šï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Multi-Agent Workflow: ç”¨æˆ¶èªè­‰åŠŸèƒ½                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  é€²åº¦ï¼š[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60%                      â”‚
â”‚                                                                   â”‚
â”‚  RESEARCH â”€â”€â”€ PLAN â”€â”€â”€ IMPLEMENT â”€â”€â”€ REVIEW â”€â”€â”€ VERIFY           â”‚
â”‚      âœ…         âœ…         ğŸ”„          â³         â³              â”‚
â”‚                                                                   â”‚
â”‚  ç•¶å‰éšæ®µï¼šIMPLEMENT                                              â”‚
â”‚  - ä»»å‹™é€²åº¦ï¼š3/5 å®Œæˆ                                            â”‚
â”‚  - è¦–è§’ç‹€æ…‹ï¼šâœ… TDD | ğŸ”„ æ•ˆèƒ½ | â³ å®‰å…¨ | â³ ç¶­è­·                â”‚
â”‚                                                                   â”‚
â”‚  æ™‚é–“ï¼š15 åˆ†é˜ å·²ç”¨ | ~15 åˆ†é˜ å‰©é¤˜                               â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JSON æ¨¡å¼

é©ç”¨æ–¼ç¨‹å¼åŒ–è™•ç†ï¼š

```json
{
  "workflow_id": "abc123",
  "task": "ç”¨æˆ¶èªè­‰åŠŸèƒ½",
  "progress_percent": 60,
  "current_stage": "implement",
  "stages": {
    "research": { "status": "completed", "duration_sec": 480 },
    "plan": { "status": "completed", "duration_sec": 420 },
    "implement": { "status": "running", "progress": "3/5" },
    "review": { "status": "pending" },
    "verify": { "status": "pending" }
  },
  "perspectives": [
    { "id": "tdd", "status": "completed" },
    { "id": "performance", "status": "running" },
    { "id": "security", "status": "pending" },
    { "id": "maintainer", "status": "pending" }
  ],
  "elapsed_sec": 900,
  "estimated_remaining_sec": 900
}
```

## é€²åº¦è¨ˆç®—

### æ•´é«”é€²åº¦

```yaml
progress_calculation:
  # å„éšæ®µæ¬Šé‡
  stage_weights:
    research: 0.15
    plan: 0.15
    implement: 0.40
    review: 0.15
    verify: 0.15

  # è¨ˆç®—å…¬å¼
  # progress = sum(stage_weight * stage_progress)

  # éšæ®µå…§é€²åº¦
  stage_progress:
    research: "perspectives_completed / total_perspectives"
    plan: "perspectives_completed / total_perspectives"
    implement: "tasks_completed / total_tasks"
    review: "perspectives_completed / total_perspectives"
    verify: "perspectives_completed / total_perspectives"
```

### æ™‚é–“é ä¼°

```yaml
time_estimation:
  method: "historical_average"

  # ä½¿ç”¨åŸºæº–ç·šæ•¸æ“š
  baseline:
    stage_duration_percent:
      research: 0.15
      plan: 0.20
      implement: 0.35
      review: 0.15
      verify: 0.15

  # å‹•æ…‹èª¿æ•´
  # æ ¹æ“šå·²å®Œæˆéšæ®µçš„å¯¦éš›è€—æ™‚èª¿æ•´é ä¼°

  # é ä¼°å…¬å¼
  # remaining = (elapsed / completed_percent) * remaining_percent
```

## å›é€€é€²åº¦è™•ç†

### å›é€€é¡¯ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”™ å›é€€é€šçŸ¥                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  REVIEW ç™¼ç¾ BLOCKERï¼Œå›é€€åˆ° IMPLEMENT                       â”‚
â”‚                                                              â”‚
â”‚  åŸå› ï¼šå®‰å…¨æ¼æ´ - SQL æ³¨å…¥é¢¨éšª                               â”‚
â”‚  è¿­ä»£ï¼šç¬¬ 2 æ¬¡ï¼ˆå…± 3 æ¬¡ä¸Šé™ï¼‰                                â”‚
â”‚                                                              â”‚
â”‚  é€²åº¦é‡ç½®ï¼š                                                  â”‚
â”‚  - IMPLEMENTï¼šé‡æ–°åŸ·è¡Œ                                       â”‚
â”‚  - REVIEWï¼šé‡æ–°åŸ·è¡Œ                                          â”‚
â”‚  - VERIFYï¼šé‡æ–°åŸ·è¡Œ                                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€²åº¦é‡ç®—

```yaml
rollback_progress:
  # å›é€€æ™‚ä¿ç•™å·²å®Œæˆéšæ®µçš„é€²åº¦
  # é‡ç½®å›é€€é»ä¹‹å¾Œçš„éšæ®µ

  example:
    before_rollback:
      research: 100%
      plan: 100%
      implement: 100%
      review: 50%
      verify: 0%
      total: 70%

    after_rollback:
      research: 100%
      plan: 100%
      implement: 0%    # é‡ç½®
      review: 0%       # é‡ç½®
      verify: 0%       # é‡ç½®
      total: 30%       # é‡æ–°è¨ˆç®—
```

## æ•´åˆåˆ° SKILL.md

### åœ¨ orchestrate/SKILL.md ä¸­ä½¿ç”¨

```markdown
## åŸ·è¡Œæµç¨‹

å·¥ä½œæµé–‹å§‹æ™‚é¡¯ç¤ºåˆå§‹é€²åº¦ï¼š

<!-- PROGRESS: workflow_start -->

æ¯å€‹éšæ®µé–‹å§‹æ™‚æ›´æ–°é€²åº¦ï¼š

<!-- PROGRESS: stage_start stage_id={stage} -->

æ¯å€‹éšæ®µçµæŸæ™‚æ›´æ–°é€²åº¦ï¼š

<!-- PROGRESS: stage_end stage_id={stage} -->
```

## ç›¸é—œæ¨¡çµ„

- [æŒ‡æ¨™æ”¶é›†å™¨](../metrics/collector.md)
- [éŒ¯èª¤æ ¼å¼åŒ–](../errors/formatter.md)
- [orchestrate SKILL](../../skills/orchestrate/SKILL.md)
