# Reduce Phase

> 匯總整合階段：將多視角研究成果整合為統一報告

## 概述

Reduce Phase 是研究框架的整合階段，負責：
1. 收集所有視角報告
2. 識別共識與矛盾
3. 解決矛盾
4. 生成匯總報告

## 執行流程

```
┌─────────────────────────────────────────────────────────┐
│  收集階段                                               │
│  • 等待所有 Map Agent 完成                              │
│  • 讀取所有視角報告                                     │
│  • 建立發現索引                                         │
└─────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────┐
│  交叉驗證                                               │
│  • 識別共識點（多視角同意）                             │
│  • 識別矛盾點（視角衝突）                               │
│  • 識別獨特洞察（單一視角發現）                         │
└─────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────┐
│  矛盾解決                                               │
│  • 分析矛盾原因                                         │
│  • 多輪比較分析                                         │
│  • 產出解決方案或標記「需進一步研究」                   │
└─────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────┐
│  報告生成                                               │
│  • 匯總所有發現                                         │
│  • 組織成結構化報告                                     │
│  • 產出行動建議                                         │
└─────────────────────────────────────────────────────────┘
```

## 收集階段

### 報告格式標準化

每份視角報告應包含：

```markdown
## 核心發現
- 發現 1
- 發現 2
- ...

## 詳細分析
...

## 建議
...

## 信心度
高 / 中 / 低
```

### 建立發現索引

```javascript
// 概念示意
const findingsIndex = {
  consensus: [],      // 多視角同意的發現
  conflicts: [],      // 視角間的矛盾
  unique: [],         // 單一視角的獨特洞察
  uncertain: []       // 信心度低的發現
}
```

## 交叉驗證

### 共識識別規則

```
如果 >= 3 個視角有相似發現 → 標記為「強共識」
如果 = 2 個視角有相似發現 → 標記為「弱共識」
如果只有 1 個視角提出 → 標記為「獨特洞察」
```

### 矛盾識別規則

```
如果視角 A 說 X，視角 B 說 非X → 標記為「矛盾」
如果視角 A 和 B 的建議互斥 → 標記為「建議衝突」
```

### 驗證矩陣

```
            架構  認知  工作流  業界
發現 1       ✓     ✓     ✓      ✓    → 強共識
發現 2       ✓     ✓     -      -    → 弱共識
發現 3       ✓     ✗     -      ✓    → 矛盾（架構 vs 認知）
發現 4       -     -     ✓      -    → 獨特洞察
```

## 矛盾解決

### 解決策略

1. **上下文分析**：矛盾可能源於不同上下文
2. **權重考量**：某些視角對特定問題更有權威性
3. **證據比較**：比較支持各方的證據強度
4. **合成解決**：找出兼顧雙方的解決方案

### 解決流程

```
1. 列出矛盾的具體內容
2. 分析矛盾的根本原因
3. 嘗試找出合成解決方案
4. 如無法解決 → 標記為「需進一步研究」
```

### 多輪比較

對於複雜矛盾，使用多輪 Task 比較：

```
Task 1: 分析矛盾 A vs B
Task 2: 從第三視角評估
Task 3: 嘗試合成解決方案
```

## 報告生成

### 匯總報告結構

```markdown
# {主題} 研究報告

## 摘要
一段話總結關鍵發現

## 研究方法
- 視角：{列表}
- 日期：{日期}
- 模式：{quick/normal/deep}

## 共識發現
### 強共識
- 發現 1：...（4/4 視角同意）
- 發現 2：...（3/4 視角同意）

### 弱共識
- 發現 3：...（2/4 視角同意）

## 矛盾分析
### 已解決
- 矛盾 1：{描述} → {解決方案}

### 需進一步研究
- 矛盾 2：{描述} → {建議的研究方向}

## 關鍵洞察
整合所有視角後的深層洞察

## 行動建議
1. 立即行動：...
2. 短期規劃：...
3. 長期考量：...

## 附錄
各視角完整報告連結
```

## 品質檢查

### 報告品質標準

- [ ] 摘要準確反映核心發現
- [ ] 共識有明確的視角支持
- [ ] 矛盾有清楚的分析
- [ ] 行動建議具體可執行

### 完整性檢查

- [ ] 所有視角報告都已納入
- [ ] 沒有遺漏重要發現
- [ ] 矛盾都有處理（解決或標記）

## 輸出

Reduce Phase 完成後產出：

```
.claude/memory/research/[topic-id]/
├── synthesis.md      # 匯總報告（主輸出）
└── overview.md       # 一頁摘要
```
