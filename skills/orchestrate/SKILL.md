---
name: orchestrate
version: 2.0.0
description: ç«¯åˆ°ç«¯å·¥ä½œæµç·¨æ’å™¨ - ä¸²è¯ RESEARCH â†’ PLAN â†’ IMPLEMENT â†’ REVIEW â†’ VERIFY
triggers: [multi-orchestrate, workflow, ç·¨æ’, è‡ªå‹•åŒ–å·¥ä½œæµ]
keywords: [orchestration, workflow, automation, end-to-end, pipeline]
---

# Multi-Agent Orchestrator v2.0.0

> è‡ªå‹•åˆ¤æ–·èµ·é» â†’ ä¸²è¯éšæ®µ â†’ æ™ºèƒ½å›é€€ â†’ å®Œæ•´å·¥ä½œæµ

## å¿«é€Ÿå°è¦½

| æ¨¡çµ„ | ç”¨é€” | è·¯å¾‘ |
|------|------|------|
| **00-quickstart** | å¿«é€Ÿé–‹å§‹ | [â†’](./00-quickstart/) |
| **01-stage-detection** | éšæ®µåˆ¤æ–·é‚è¼¯ | [â†’](./01-stage-detection/) |
| **02-data-flow** | æ•¸æ“šå‚³é | [â†’](./02-data-flow/) |
| **03-error-handling** | éŒ¯èª¤è™•ç†èˆ‡å›é€€ | [â†’](./03-error-handling/) |
| **04-git-worktree** | Git Worktree éš”é›¢ | [â†’](./04-git-worktree/) |

### å…±ç”¨æ¨¡çµ„ï¼ˆshared/ï¼‰

æœ¬ skill ä½¿ç”¨ä»¥ä¸‹å…±ç”¨æ¨¡çµ„ï¼š

| æ¨¡çµ„ | ç”¨é€” | è·¯å¾‘ |
|------|------|------|
| **metrics** | æŒ‡æ¨™æ”¶é›†èˆ‡å½™ç¸½ | [â†’](../../shared/metrics/) |
| **reporting** | å ±å‘Šç”Ÿæˆ | [â†’](../../shared/reporting/) |
| **progress** | é€²åº¦é¡¯ç¤º | [â†’](../../shared/progress/) |
| **errors** | éŒ¯èª¤è™•ç† | [â†’](../../shared/errors/) |

## ä½¿ç”¨æ–¹å¼

```bash
/multi-orchestrate [éœ€æ±‚æè¿°]

# ç¯„ä¾‹
/multi-orchestrate "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"
/multi-orchestrate --from-research user-auth
/multi-orchestrate --from-plan user-auth
/multi-orchestrate --start-at implement --plan user-auth
```

### Flags

```bash
# éšæ®µæ§åˆ¶
--from-research ID   # å¾å·²å®Œæˆçš„ç ”ç©¶é–‹å§‹
--from-plan ID       # å¾å·²å®Œæˆçš„è¨ˆåŠƒé–‹å§‹
--start-at STAGE     # æŒ‡å®šèµ·å§‹éšæ®µ
--skip STAGE         # è·³éæŒ‡å®šéšæ®µ
--stop-at STAGE      # åœæ­¢åœ¨æŒ‡å®šéšæ®µ
--no-rollback        # ç¦ç”¨è‡ªå‹•å›é€€
--dry-run            # åªé¡¯ç¤ºæµç¨‹ï¼Œä¸åŸ·è¡Œ

# Git Worktree æ§åˆ¶
--worktree           # å¼·åˆ¶ä½¿ç”¨ worktreeï¼ˆé è¨­ï¼šè‡ªå‹•ï¼‰
--no-worktree        # ç¦ç”¨ worktreeï¼Œç›´æ¥åœ¨ main å·¥ä½œ
--worktree-dir PATH  # è‡ªè¨‚ worktree ç›®éŒ„

# æ¢å¾©/æ¸…ç†
--resume ID          # æ¢å¾©å·¥ä½œæµï¼ˆè‡ªå‹•æª¢æ¸¬ worktreeï¼‰
--abandon ID         # æ”¾æ£„å·¥ä½œæµ
--keep-patch         # æ”¾æ£„æ™‚ä¿ç•™ patch
--cleanup-worktrees  # æ¸…ç†æ‰€æœ‰å­¤ç«‹çš„ worktrees

# åˆä½µæ§åˆ¶
--merge-strategy STR # squashï¼ˆé è¨­ï¼‰| rebase | merge
--auto-merge         # è‡ªå‹•åˆä½µï¼ˆä¸å‰µå»º PRï¼‰
```

## å·¥ä½œæµæ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Multi-Agent Orchestrator                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  è¼¸å…¥ï¼šéœ€æ±‚æè¿°                                                          â”‚
â”‚     â†“                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     éšæ®µåˆ¤æ–·ï¼ˆè‡ªå‹•è­˜åˆ¥èµ·é»ï¼‰                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚     â†“                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ RESEARCH â”‚ â†’ â”‚  PLAN    â”‚ â†’ â”‚IMPLEMENT â”‚ â†’ â”‚  REVIEW  â”‚ â†’ â”‚  VERIFY  â”‚ â”‚
â”‚  â”‚          â”‚    â”‚          â”‚    â”‚          â”‚    â”‚          â”‚    â”‚          â”‚ â”‚
â”‚  â”‚ å¤šè¦–è§’   â”‚    â”‚ å¤šè¦–è§’   â”‚    â”‚ ç›£ç£å¼   â”‚    â”‚ å¤šè¦–è§’   â”‚    â”‚ å¤šè¦–è§’   â”‚ â”‚
â”‚  â”‚ ç ”ç©¶     â”‚    â”‚ è¦åŠƒ     â”‚    â”‚ å¯¦ä½œ     â”‚    â”‚ å¯©æŸ¥     â”‚    â”‚ é©—è­‰     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚               â”‚               â”‚               â”‚               â”‚      â”‚
â”‚       â†“               â†“               â†“               â†“               â†“      â”‚
â”‚  research-      implementation-  code +         review-        release-      â”‚
â”‚  report.md      plan.md          impl-log.md    summary.md     decision.md   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           æ™ºèƒ½å›é€€                                      â”‚ â”‚
â”‚  â”‚   REVIEW BLOCKER â†’ å›åˆ° IMPLEMENT                                      â”‚ â”‚
â”‚  â”‚   VERIFY BLOCKED â†’ å›åˆ° IMPLEMENT                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  è¼¸å‡ºï¼šâœ… SHIP IT æˆ– âŒ éœ€è¦æ›´å¤šè¿­ä»£                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## éšæ®µèªªæ˜

### Stage 1: RESEARCHï¼ˆå¯é¸ï¼‰

**è§¸ç™¼æ¢ä»¶**ï¼šéœ€æ±‚ä¸æ˜ç¢ºã€éœ€è¦æŠ€è¡“èª¿ç ”

```yaml
research:
  trigger_if:
    - unclear_requirements
    - unknown_technology
    - need_competitive_analysis

  output:
    - research-report.md

  next_stage: PLAN
```

**æŒ‡ä»¤**ï¼š`/multi-research`

### Stage 2: PLAN

**è§¸ç™¼æ¢ä»¶**ï¼šæœ‰æ˜ç¢ºéœ€æ±‚ï¼Œéœ€è¦è¦åŠƒ

```yaml
plan:
  trigger_if:
    - clear_requirements
    - research_complete

  input:
    - research-report.md (optional)
    - requirements

  output:
    - implementation-plan.md
    - milestones.md

  next_stage: IMPLEMENT
```

**æŒ‡ä»¤**ï¼š`/multi-plan`

### Stage 3: IMPLEMENT

**è§¸ç™¼æ¢ä»¶**ï¼šæœ‰å¯¦ä½œè¨ˆåŠƒ

```yaml
implement:
  trigger_if:
    - plan_complete

  input:
    - implementation-plan.md

  output:
    - code changes
    - implementation-log.md
    - tests

  next_stage: REVIEW
```

**æŒ‡ä»¤**ï¼š`/multi-implement`

### Stage 4: REVIEW

**è§¸ç™¼æ¢ä»¶**ï¼šæœ‰ç¨‹å¼ç¢¼è®Šæ›´

```yaml
review:
  trigger_if:
    - implementation_complete

  input:
    - code changes
    - implementation-log.md

  output:
    - review-summary.md

  next_stage: VERIFY
  rollback_if: has_blockers â†’ IMPLEMENT
```

**æŒ‡ä»¤**ï¼š`/multi-review`

### Stage 5: VERIFY

**è§¸ç™¼æ¢ä»¶**ï¼šå¯©æŸ¥é€šé

```yaml
verify:
  trigger_if:
    - review_passed

  input:
    - code changes
    - review-summary.md

  output:
    - release-decision.md

  complete_if: SHIP_IT
  rollback_if: BLOCKED â†’ IMPLEMENT
```

**æŒ‡ä»¤**ï¼š`/multi-verify`

## éšæ®µåˆ¤æ–·é‚è¼¯

### è‡ªå‹•è­˜åˆ¥èµ·é»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    éšæ®µåˆ¤æ–·æ±ºç­–æ¨¹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æª¢æŸ¥ Memory æ˜¯å¦æœ‰ç›¸é—œè¨˜éŒ„ï¼Ÿ                                â”‚
â”‚      â†“                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ verifications/{id}/release-decision.md   â”‚               â”‚
â”‚  â”‚    å­˜åœ¨ä¸” SHIP_ITï¼Ÿ                       â”‚               â”‚
â”‚  â”‚    â†’ å·²å®Œæˆï¼Œç„¡éœ€åŸ·è¡Œ                     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚      â†“ ä¸å­˜åœ¨æˆ– BLOCKED                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ reviews/{id}/review-summary.md           â”‚               â”‚
â”‚  â”‚    å­˜åœ¨ä¸”ç„¡ BLOCKERï¼Ÿ                     â”‚               â”‚
â”‚  â”‚    â†’ å¾ VERIFY é–‹å§‹                       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚      â†“ ä¸å­˜åœ¨æˆ–æœ‰ BLOCKER                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ implementations/{id}/implementation-log.mdâ”‚               â”‚
â”‚  â”‚    å­˜åœ¨ï¼Ÿ                                 â”‚               â”‚
â”‚  â”‚    â†’ å¾ REVIEW é–‹å§‹                       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚      â†“ ä¸å­˜åœ¨                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ plans/{id}/implementation-plan.md        â”‚               â”‚
â”‚  â”‚    å­˜åœ¨ï¼Ÿ                                 â”‚               â”‚
â”‚  â”‚    â†’ å¾ IMPLEMENT é–‹å§‹                    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚      â†“ ä¸å­˜åœ¨                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ research/{id}/research-report.md         â”‚               â”‚
â”‚  â”‚    å­˜åœ¨ï¼Ÿ                                 â”‚               â”‚
â”‚  â”‚    â†’ å¾ PLAN é–‹å§‹                         â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚      â†“ ä¸å­˜åœ¨                                                â”‚
â”‚  éœ€æ±‚æ˜ç¢ºå—ï¼Ÿ                                                â”‚
â”‚    æ˜¯ â†’ å¾ PLAN é–‹å§‹                                         â”‚
â”‚    å¦ â†’ å¾ RESEARCH é–‹å§‹                                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è©³è¦‹ï¼š[01-stage-detection/_base/auto-detect.md](./01-stage-detection/_base/auto-detect.md)

## æ•¸æ“šå‚³é

### éšæ®µé–“ç”¢å‡ºç‰©æ˜ å°„

```
RESEARCH output          â†’ PLAN input
  research-report.md        (è¼‰å…¥ç ”ç©¶å ±å‘Š)

PLAN output              â†’ IMPLEMENT input
  implementation-plan.md    (è¼‰å…¥å¯¦ä½œè¨ˆåŠƒ)
  milestones.md

IMPLEMENT output         â†’ REVIEW input
  code changes              (git diff)
  implementation-log.md

REVIEW output            â†’ VERIFY input
  review-summary.md         (è¼‰å…¥å¯©æŸ¥çµæœ)

VERIFY output            â†’ å®Œæˆ/å›é€€
  release-decision.md
```

è©³è¦‹ï¼š[02-data-flow/_base/stage-handoff.md](./02-data-flow/_base/stage-handoff.md)

## å›é€€æ©Ÿåˆ¶

### å›é€€è¦å‰‡

```yaml
rollback_rules:
  review_blocker:
    trigger: review has BLOCKER issues
    action: return to IMPLEMENT
    data:
      - blocker_list
      - suggested_fixes

  verify_blocked:
    trigger: verify returns BLOCKED
    action: return to IMPLEMENT
    data:
      - failure_analysis
      - test_results

  max_iterations:
    limit: 3
    on_exceed: pause_and_ask_user
```

### å›é€€æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å›é€€ç¤ºä¾‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  è¿­ä»£ 1:                                                     â”‚
â”‚  PLAN â†’ IMPLEMENT â†’ REVIEW                                   â”‚
â”‚                        â†“                                     â”‚
â”‚                    æœ‰ BLOCKER                                â”‚
â”‚                        â†“                                     â”‚
â”‚  è¿­ä»£ 2:                                                     â”‚
â”‚         â† å›é€€ â† IMPLEMENT (ä¿®æ­£)                            â”‚
â”‚                        â†“                                     â”‚
â”‚                    REVIEW â†’ VERIFY                           â”‚
â”‚                               â†“                              â”‚
â”‚                           BLOCKED                            â”‚
â”‚                               â†“                              â”‚
â”‚  è¿­ä»£ 3:                                                     â”‚
â”‚               â† å›é€€ â† IMPLEMENT (å†ä¿®æ­£)                    â”‚
â”‚                               â†“                              â”‚
â”‚                           REVIEW                             â”‚
â”‚                               â†“                              â”‚
â”‚                           VERIFY                             â”‚
â”‚                               â†“                              â”‚
â”‚                           SHIP IT âœ…                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è©³è¦‹ï¼š[03-error-handling/_base/rollback-rules.md](./03-error-handling/_base/rollback-rules.md)

## åŸ·è¡Œæ¨¡å¼

### å®Œæ•´æ¨¡å¼ï¼ˆé è¨­ï¼‰

```bash
/multi-orchestrate "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"
```

åŸ·è¡Œæ‰€æœ‰éœ€è¦çš„éšæ®µï¼Œè‡ªå‹•åˆ¤æ–·èµ·é»ã€‚

### éƒ¨åˆ†åŸ·è¡Œ

```bash
# åªåŸ·è¡Œ PLAN â†’ IMPLEMENT
/multi-orchestrate --stop-at implement "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"

# å¾ PLAN é–‹å§‹ï¼ˆè·³é RESEARCHï¼‰
/multi-orchestrate --start-at plan "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"

# è·³é RESEARCH
/multi-orchestrate --skip research "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"
```

### çºŒæ¥æ¨¡å¼

```bash
# å¾ä¸Šæ¬¡ä¸­æ–·è™•ç¹¼çºŒ
/multi-orchestrate --resume user-auth
```

### æ¼”ç·´æ¨¡å¼

```bash
# åªé¡¯ç¤ºæœƒåŸ·è¡Œçš„éšæ®µï¼Œä¸å¯¦éš›åŸ·è¡Œ
/multi-orchestrate --dry-run "æ–°å¢ç”¨æˆ¶èªè­‰åŠŸèƒ½"
```

## Memory æ•´åˆ

### å®Œæ•´å·¥ä½œæµ Memory çµæ§‹

```
.claude/memory/
â”œâ”€â”€ research/
â”‚   â””â”€â”€ user-auth/
â”‚       â””â”€â”€ research-report.md
â”œâ”€â”€ plans/
â”‚   â””â”€â”€ user-auth/
â”‚       â”œâ”€â”€ implementation-plan.md
â”‚       â””â”€â”€ milestones.md
â”œâ”€â”€ implementations/
â”‚   â””â”€â”€ user-auth/
â”‚       â”œâ”€â”€ implementation-log.md
â”‚       â””â”€â”€ perspectives/
â”œâ”€â”€ reviews/
â”‚   â””â”€â”€ user-auth/
â”‚       â””â”€â”€ review-summary.md
â””â”€â”€ verifications/
    â””â”€â”€ user-auth/
        â””â”€â”€ release-decision.md
```

### å·¥ä½œæµå…ƒæ•¸æ“š

```yaml
# .claude/memory/workflows/user-auth/workflow.yaml
workflow:
  id: user-auth
  created: 2025-01-24
  status: completed

  stages:
    research:
      status: completed
      started: 2025-01-24T10:00
      completed: 2025-01-24T10:30

    plan:
      status: completed
      started: 2025-01-24T10:35
      completed: 2025-01-24T11:00

    implement:
      status: completed
      iterations: 2
      started: 2025-01-24T11:05
      completed: 2025-01-24T12:30

    review:
      status: completed
      started: 2025-01-24T12:35
      completed: 2025-01-24T13:00

    verify:
      status: ship_it
      started: 2025-01-24T13:05
      completed: 2025-01-24T13:30

  total_iterations: 2
  total_time: 3h30m
```

## Checkpoint æ•´åˆ

| Stage | evolve Checkpoint | å‹•ä½œ |
|-------|-------------------|------|
| é–‹å§‹ | CP1 | æœå°‹ Memory |
| RESEARCH å®Œæˆ | CP3.5 | æ›´æ–° index.md |
| PLAN å®Œæˆ | CP3.5 | æ›´æ–° index.md |
| IMPLEMENT | CP2 | Build + Test |
| REVIEW å®Œæˆ | CP3.5 | æ›´æ–° index.md |
| VERIFY å®Œæˆ | CP6 | ç™¼å¸ƒé©—è­‰ |
| å›é€€ | CP5 | é©—å±åˆ†æ |

## è¼¸å‡ºç¯„ä¾‹

### æˆåŠŸå®Œæˆ

```
âœ… å·¥ä½œæµå®Œæˆï¼šuser-auth

ğŸ“Š åŸ·è¡Œæ‘˜è¦ï¼š
   - èµ·å§‹éšæ®µï¼šPLAN
   - çµæŸéšæ®µï¼šVERIFY
   - ç¸½è¿­ä»£ï¼š2
   - ç¸½æ™‚é–“ï¼š3h30m

ğŸ”„ éšæ®µæ­·ç¨‹ï¼š
   1. PLAN âœ…
   2. IMPLEMENT âœ…
   3. REVIEW âš ï¸ (1 BLOCKER)
   4. IMPLEMENT âœ… (ä¿®æ­£)
   5. REVIEW âœ…
   6. VERIFY âœ…

ğŸ¯ æœ€çµ‚çµæœï¼šSHIP IT

ğŸ“ ç”¢å‡ºç‰©ï¼š
   - .claude/memory/plans/user-auth/
   - .claude/memory/implementations/user-auth/
   - .claude/memory/reviews/user-auth/
   - .claude/memory/verifications/user-auth/
```

### éœ€è¦äººå·¥ä»‹å…¥

```
âš ï¸ å·¥ä½œæµæš«åœï¼šuser-auth

ğŸ“Š åŸ·è¡Œæ‘˜è¦ï¼š
   - èµ·å§‹éšæ®µï¼šPLAN
   - ç•¶å‰éšæ®µï¼šIMPLEMENT
   - è¿­ä»£æ¬¡æ•¸ï¼š3ï¼ˆå·²é”ä¸Šé™ï¼‰

âŒ æš«åœåŸå› ï¼š
   - é€£çºŒ 3 æ¬¡è¿­ä»£æœªèƒ½é€šé REVIEW
   - éœ€è¦äººå·¥ä»‹å…¥è§£æ±º

ğŸ” å•é¡Œæ‘˜è¦ï¼š
   1. [Security] SQL æ³¨å…¥é¢¨éšªæœªè§£æ±º
   2. [TDD] æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦è¦†è“‹ä¸è¶³

ğŸ’¡ å»ºè­°è¡Œå‹•ï¼š
   1. æ‰‹å‹•å¯©æŸ¥ç›¸é—œç¨‹å¼ç¢¼
   2. ç¢ºèªå®‰å…¨ä¿®æ­£æ–¹æ¡ˆ
   3. ä½¿ç”¨ /multi-orchestrate --resume user-auth ç¹¼çºŒ
```

## ç›¸é—œè³‡æº

- [å¿«é€Ÿé–‹å§‹](./00-quickstart/_base/usage.md)
- [éšæ®µåˆ¤æ–·é‚è¼¯](./01-stage-detection/_base/auto-detect.md)
- [æ•¸æ“šå‚³é](./02-data-flow/_base/stage-handoff.md)
- [å›é€€è¦å‰‡](./03-error-handling/_base/rollback-rules.md)

## Git Worktree éš”é›¢æ¨¡å¼

### æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Git Worktree éš”é›¢æ¶æ§‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  /project/ (main)                    .worktrees/{id}/ (feature)         â”‚
â”‚  â”œâ”€â”€ src/          (ç©©å®š)            â”œâ”€â”€ src/          (é–‹ç™¼ä¸­)         â”‚
â”‚  â”œâ”€â”€ tests/                          â”œâ”€â”€ tests/                          â”‚
â”‚  â”œâ”€â”€ .claude/                        â””â”€â”€ package.json                    â”‚
â”‚  â”‚   â””â”€â”€ memory/   (æ‰€æœ‰ Memory)                                        â”‚
â”‚  â””â”€â”€ .worktrees/                     åˆ†æ”¯ï¼šfeature/{id}                  â”‚
â”‚      â””â”€â”€ {id}/  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’                                      â”‚
â”‚                                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚                                                                          â”‚
â”‚  RESEARCH â†’ PLAN          IMPLEMENT â†’ REVIEW â†’ VERIFY                   â”‚
â”‚      â†“         â†“               â†“          â†“         â†“                    â”‚
â”‚    main      main           worktree  worktree  worktree                â”‚
â”‚                                                      â†“                   â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                               â”‚ SHIP IT â†’ åˆä½µåˆ° main + æ¸…ç† worktree   â”‚â”‚
â”‚                               â”‚ BLOCKED â†’ ä¿ç•™ worktree ç¹¼çºŒè¿­ä»£       â”‚â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒå„ªå‹¢

| å„ªå‹¢ | èªªæ˜ |
|------|------|
| **main ç©©å®š** | main åˆ†æ”¯å§‹çµ‚å¯éƒ¨ç½²ï¼Œä¸å—é–‹ç™¼å½±éŸ¿ |
| **ä¹¾æ·¨å›é€€** | å¤±æ•—æ™‚åªéœ€åˆªé™¤ worktreeï¼Œç„¡éœ€ git revert |
| **ä¸¦è¡Œé–‹ç™¼** | å¤šå€‹ feature å¯åŒæ™‚åœ¨ä¸åŒ worktree ä¸­é–‹ç™¼ |
| **æ¸…æ™° diff** | `git diff main..feature/{id}` æ¸…æ¥šé¡¯ç¤ºè®Šæ›´ |

### é—œéµ Checkpoint

| Checkpoint | æ™‚æ©Ÿ | å‹•ä½œ |
|------------|------|------|
| CP0.5 | PLAN å®Œæˆå¾Œ | å‰µå»º worktree |
| CP6.5 | VERIFY å®Œæˆå¾Œ | åˆä½µ/ä¿ç•™/æ¸…ç† |

è©³è¦‹ï¼š[04-git-worktree/_base/lifecycle.md](./04-git-worktree/_base/lifecycle.md)

## èˆ‡å…¶ä»– Skill çš„é—œä¿‚

orchestrate æ˜¯çµ±ä¸€ç·¨æ’å™¨ï¼Œèª¿ç”¨å…¶ä»– 5 å€‹ skillï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ORCHESTRATE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  èª¿ç”¨é †åºï¼š                                                  â”‚
â”‚                                                              â”‚
â”‚  1. /multi-research (å¯é¸)                                   â”‚
â”‚  2. /multi-plan                                              â”‚
â”‚  3. /multi-implement                                         â”‚
â”‚  4. /multi-review                                            â”‚
â”‚  5. /multi-verify                                            â”‚
â”‚                                                              â”‚
â”‚  æ¯å€‹ skill éƒ½æ˜¯ç¨ç«‹å¯ç”¨çš„ï¼Œorchestrate è² è²¬ä¸²è¯ã€‚          â”‚
â”‚                                                              â”‚
â”‚  åœ¨ Worktree æ¨¡å¼ä¸‹ï¼š                                        â”‚
â”‚  - RESEARCH/PLAN åœ¨ main ç›®éŒ„åŸ·è¡Œ                            â”‚
â”‚  - IMPLEMENT/REVIEW/VERIFY åœ¨ worktree ç›®éŒ„åŸ·è¡Œ              â”‚
â”‚  - Memory å§‹çµ‚å¯«å…¥ main ç›®éŒ„                                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŒ‡æ¨™æ”¶é›†èˆ‡å ±å‘Š

### å·¥ä½œæµç´šæŒ‡æ¨™

orchestrate è² è²¬ç®¡ç†æ•´å€‹å·¥ä½œæµçš„æŒ‡æ¨™ç”Ÿå‘½é€±æœŸï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æŒ‡æ¨™æ”¶é›†æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  å·¥ä½œæµé–‹å§‹                                                  â”‚
â”‚      â†“                                                       â”‚
â”‚  <!-- METRICS: start_workflow -->                           â”‚
â”‚      â†“                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ RESEARCH â”‚â†’ â”‚   PLAN   â”‚â†’ â”‚IMPLEMENT â”‚â†’ â”‚  REVIEW  â”‚â†’   â”‚
â”‚  â”‚start/end â”‚  â”‚start/end â”‚  â”‚start/end â”‚  â”‚start/end â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â†“                       â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                               â”‚  VERIFY  â”‚                   â”‚
â”‚                               â”‚start/end â”‚                   â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                      â†“                       â”‚
â”‚  <!-- METRICS: end_workflow -->                             â”‚
â”‚      â†“                                                       â”‚
â”‚  ç”Ÿæˆå ±å‘Š â†’ .claude/memory/metrics/{id}/report.md           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŒ‡æ¨™å½™ç¸½

å·¥ä½œæµçµæŸæ™‚ï¼Œorchestrate å½™ç¸½æ‰€æœ‰éšæ®µæŒ‡æ¨™ï¼š

| å½™ç¸½æŒ‡æ¨™ | è¨ˆç®—æ–¹å¼ | ç”¨é€” |
|----------|----------|------|
| `total_duration_sec` | æ‰€æœ‰éšæ®µè€—æ™‚ç¸½å’Œ | æ•ˆç‡è¿½è¹¤ |
| `total_agents` | æ‰€æœ‰è¦–è§’æ•¸é‡ç¸½å’Œ | è³‡æºä½¿ç”¨ |
| `successful_agents` | æˆåŠŸå®Œæˆçš„è¦–è§’æ•¸ | æˆåŠŸç‡ |
| `total_issues` | æ‰€æœ‰ç™¼ç¾çš„å•é¡Œæ•¸ | å“è³ªæŒ‡æ¨™ |
| `blockers` | BLOCKER ç´šå•é¡Œæ•¸ | é—œéµå•é¡Œ |
| `total_rollbacks` | å›é€€æ¬¡æ•¸ | ç©©å®šæ€§ |
| `final_pass_at_k` | æœ€çµ‚é€šéæ™‚çš„å˜—è©¦æ¬¡æ•¸ | æ•ˆç‡æŒ‡æ¨™ |

### å ±å‘Šç”Ÿæˆ

å·¥ä½œæµå®Œæˆå¾Œè‡ªå‹•ç”Ÿæˆå ±å‘Šï¼š

```
.claude/memory/metrics/{workflow-id}/
â”œâ”€â”€ metrics.yaml    â† åŸå§‹æ•¸æ“š
â””â”€â”€ report.md       â† å¯è®€å ±å‘Š
    â”œâ”€â”€ åŸ·è¡Œæ‘˜è¦
    â”œâ”€â”€ éšæ®µè€—æ™‚åˆ†å¸ƒ
    â”œâ”€â”€ è¿­ä»£æ­·ç¨‹
    â”œâ”€â”€ å•é¡Œåˆ†å¸ƒ
    â””â”€â”€ æ”¹å–„å»ºè­°
```

è©³è¦‹ï¼š
- [shared/metrics/collector.md](../../shared/metrics/collector.md)
- [shared/reporting/single-report.md](../../shared/reporting/single-report.md)
